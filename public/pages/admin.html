<!DOCTYPE html>
<html lang="zh-TW">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç³»çµ±ç®¡ç†</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css"
    integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="/assets/css/style.css">
</head>

<body>
  <div class="container py-5">
    <div class="d-flex justify-content-center flex-wrap gap-3 mb-4">
      <a href="/dashboard" class="btn btn-light">ğŸ  é¦–é </a>
      <a href="/activity" class="btn btn-info">æ´»å‹•éƒ¨</a>
      <a href="/design" class="btn btn-info">ç¾å®£éƒ¨</a>
      <a href="/pr" class="btn btn-info">å…¬é—œéƒ¨</a>
      <a href="/secretary" class="btn btn-info">æ–‡æ›¸éƒ¨</a>
      <a href="/finance" class="btn btn-info">è²¡å‹™éƒ¨</a>
      <a href="/history" class="btn btn-info">æ­·å²è³‡æ–™</a>
    </div>
    
    <div class="text-center mb-4">
      <h1>ğŸ”§ ç³»çµ±ç®¡ç†</h1>
    </div>

    <!-- ä½¿ç”¨è€…ç®¡ç† -->
    <div class="card">
      <div class="card-header">ğŸ‘¥ ä½¿ç”¨è€…ç®¡ç†</div>
      <div class="card-body">
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>å§“å</th>
              <th>éƒ¨é–€</th>
              <th>å¸³è™Ÿ</th>
              <th>è§’è‰²</th>
              <th>ç‹€æ…‹</th>
              <th>æ“ä½œ</th>
            </tr>
          </thead>
          <tbody id="userTableBody">
            <!-- å‹•æ…‹å¡«å…¥ä½¿ç”¨è€… -->
          </tbody>
        </table>
      </div>
    </div>

    <!-- å­¸å¹´åº¦ç®¡ç† -->
    <div class="card">
      <div class="card-header">ğŸ“… å­¸å¹´åº¦ç®¡ç†</div>
      <div class="card-body">
        <form class="row g-3 mb-3" id="yearForm">
          <div class="col-md-10">
            <input type="text" class="form-control" placeholder="æ–°å¢å­¸å¹´åº¦ (ä¾‹å¦‚ï¼š2024-2025)" id="academicYear" required>
          </div>
          <div class="col-md-2">
            <button type="submit" class="btn btn-primary w-100">æ–°å¢</button>
          </div>
        </form>
        <ul class="list-group" id="yearList">
          <!-- å‹•æ…‹å­¸å¹´åˆ—è¡¨ -->
        </ul>
      </div>
    </div>
  </div>

  <script>
    const userTableBody = document.getElementById('userTableBody');
    const yearList = document.getElementById('yearList');
    const users = [
      { name: 'ç‹å°æ˜', dept: 'è²¡å‹™éƒ¨', account: 'wang01', role: 'admin', enabled: true },
      { name: 'æ—ç¾å®£', dept: 'ç¾å®£éƒ¨', account: 'lin02', role: 'member', enabled: false }
    ];

    const years = ['2023-2024', '2022-2023'];

    function renderUsers() {
      userTableBody.innerHTML = '';
      users.forEach((user, i) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td><input class="form-control form-control-sm" value="${user.name}" onchange="users[${i}].name=this.value"></td>
          <td><input class="form-control form-control-sm" value="${user.dept}" onchange="users[${i}].dept=this.value"></td>
          <td>${user.account}</td>
          <td>
            <select class="form-select form-select-sm" onchange="users[${i}].role=this.value">
              <option value="member" ${user.role === 'member' ? 'selected' : ''}>ä¸€èˆ¬æˆå“¡</option>
              <option value="admin" ${user.role === 'admin' ? 'selected' : ''}>ç®¡ç†å“¡</option>
            </select>
          </td>
          <td>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" ${user.enabled ? 'checked' : ''} onchange="users[${i}].enabled=this.checked">
            </div>
          </td>
          <td>
            <button class="btn btn-danger btn-sm" onclick="deleteUser(${i})">åˆªé™¤</button>
          </td>
        `;
        userTableBody.appendChild(tr);
      });
    }

    function deleteUser(index) {
      if (confirm('ç¢ºå®šè¦åˆªé™¤æ­¤ä½¿ç”¨è€…ï¼Ÿ')) {
        users.splice(index, 1);
        renderUsers();
      }
    }

    function renderYears() {
      yearList.innerHTML = '';
      years.forEach((year, i) => {
        const li = document.createElement('li');
        li.className = 'list-group-item d-flex justify-content-between align-items-center';
        li.innerHTML = `
          ${year}
          <button class="btn btn-danger btn-sm" onclick="deleteYear(${i})">åˆªé™¤</button>
        `;
        yearList.appendChild(li);
      });
    }

    function deleteYear(i) {
      if (confirm('ç¢ºå®šåˆªé™¤è©²å­¸å¹´åº¦ï¼Ÿ')) {
        years.splice(i, 1);
        renderYears();
      }
    }

    document.getElementById('yearForm').addEventListener('submit', function (e) {
      e.preventDefault();
      const newYear = document.getElementById('academicYear').value;
      if (newYear && !years.includes(newYear)) {
        years.unshift(newYear);
        renderYears();
        e.target.reset();
      }
    });

    window.onload = function () {
      renderUsers();
      renderYears();
    };
  </script>

  <footer class="mt-5 text-center">
    æ±å³å¤§å­¸è³‡æ–™ç§‘å­¸ç³»å­¸æœƒ &copy; 2025
  </footer>
</div>
  
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/assets/js/globalErrorHandler.js"></script>
  <script src="/assets/js/common.js"></script>
  <script src="/assets/js/admin.js"></script>
</body>

</html>